/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   matrix.c                                           :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: tkong <tkong@student.42seoul.kr>           +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2023/05/20 14:18:24 by tkong             #+#    #+#             */
/*   Updated: 2023/05/21 15:13:06 by tkong            ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "minirt.h"

void	init_mat4(t_mat4 *m) {
	ft_bzero(m->_[0], sizeof(t_f32) * 4);
	ft_bzero(m->_[1], sizeof(t_f32) * 4);
	ft_bzero(m->_[2], sizeof(t_f32) * 4);
	ft_bzero(m->_[3], sizeof(t_f32) * 4);
	m->_[0][0] = 1;
	m->_[1][1] = 1;
	m->_[2][2] = 1;
	m->_[3][3] = 1;
}

void	mlt_mat4(t_mat4 *m, t_mat4 *m2, t_mat4 *res) {
	t_i32	i;
	t_i32	j;

	i = -1;
	while (++i < 4)
	{
		j = -1;
		while (++j < 4)
			res->_[i][j]\
				= m->_[i][0] * m2->_[0][j]\
				+ m->_[i][1] * m2->_[1][j]\
				+ m->_[i][2] * m2->_[2][j]\
				+ m->_[i][3] * m2->_[3][j];
	}
}

t_v3	mlt_v3mat(t_v3 *v, t_mat4 *m)
{
	return (make_v3(\
		v->x * m->_[0][0] + v->y * m->_[1][0] + v->z * m->_[2][0],\
		v->x * m->_[0][1] + v->y * m->_[1][1] + v->z * m->_[2][1],\
		v->x * m->_[0][2] + v->y * m->_[1][2] + v->z * m->_[2][2]));
}
